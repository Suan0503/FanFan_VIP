# 🎊 FanFan LINE Bot - 新年版

> 🧧 恭喜發財 萬事如意 🧧

一個功能強大的 LINE 翻譯機器人，現已升級為新年風格並支援功能分級管理！

## ✨ 最新更新 (2026-01-08)

### 🎨 新年風格選單
- 全新紅金配色主題
- 節慶祝福語整合
- 溫馨的用戶體驗

### 🔧 功能開關系統
- 支援 5 種功能獨立控制
- 每個群組唯一 TOKEN
- 適合對外販售功能分級

## 🌟 核心功能

### 翻譯功能
- 🌍 支援 9 種語言即時翻譯
- 🤖 自動翻譯模式
- 🎤 語音翻譯支援
- 🔄 Google + DeepL 雙引擎

### 管理功能
- 👥 群組管理員系統
- 📊 使用統計分析
- 🎛️ 功能開關控制
- 🔑 TOKEN 認證系統

### 新年特色
- 🎊 節慶主題選單
- 🧧 新春祝福語
- 🏮 喜慶配色設計

## 🎯 支援語言

| 語言 | 代碼 | 圖示 |
|------|------|------|
| 繁體中文 | zh-TW | 🇹🇼 |
| 英文 | en | 🇺🇸 |
| 日文 | ja | 🇯🇵 |
| 韓文 | ko | 🇰🇷 |
| 泰文 | th | 🇹🇭 |
| 越南文 | vi | 🇻🇳 |
| 印尼文 | id | 🇮🇩 |
| 緬甸文 | my | 🇲🇲 |
| 俄文 | ru | 🇷🇺 |

## 📋 功能開關清單

| 功能 | 代碼 | 說明 |
|------|------|------|
| 翻譯功能 | `translate` | 基本翻譯功能 |
| 語音翻譯 | `voice` | 語音訊息翻譯 |
| 管理功能 | `admin` | 管理相關功能 |
| 自動翻譯 | `auto_translate` | 自動翻譯模式 |
| 統計功能 | `statistics` | 使用統計查詢 |

## 🚀 快速開始

### 安裝需求
```bash
pip install -r requirements.txt
```

### 環境設定
在 `.env` 檔案中設定：
```env
CHANNEL_ACCESS_TOKEN=your_line_channel_token
CHANNEL_SECRET=your_line_channel_secret
DEEPL_API_KEY=your_deepl_api_key (可選)
DATABASE_URL=your_database_url (可選)
```

### 啟動服務
```bash
python main.py
```

## 💡 使用指南

### 基本指令

#### 用戶指令
```
/選單          - 開啟翻譯設定選單
/menu          - 同上
語音翻譯        - 切換語音翻譯開關
自動翻譯        - 切換自動翻譯開關
!翻譯 [文字]   - 手動翻譯指定文字
我的id         - 查看自己的 User ID
```

#### 管理員指令
```
/指令          - 顯示管理選單
/狀態          - 查看系統狀態
/統計          - 查看翻譯統計
/記憶體        - 查看記憶體使用
/流量          - 查看今日流量
/重啟          - 重啟系統
```

#### 功能管理指令（僅主人）
```
/功能設定      - 查看群組功能狀態
/設定功能 [功能名] - 開啟/關閉功能
/生成token     - 生成群組 TOKEN
```

### 使用範例

#### 設定翻譯語言
1. 在群組中輸入 `/選單`
2. 點選要翻譯的目標語言
3. 可複選多個語言
4. 使用「重設」清除所有設定

#### 功能分級管理
```bash
# 查看當前功能
/功能設定

# 設定為基礎版
/設定功能 voice          # 關閉語音
/設定功能 statistics     # 關閉統計

# 設定為專業版
/設定功能 voice          # 開啟語音
/設定功能 statistics     # 開啟統計
/設定功能 admin          # 開啟管理

# 生成 TOKEN
/生成token
```

## 🎁 商業方案建議

### 免費版
- ✅ 基本翻譯
- ✅ 自動翻譯
- ❌ 語音翻譯
- ❌ 統計功能
- **適合**: 個人用戶、試用

### 標準版 (NT$ 299/月)
- ✅ 基本翻譯
- ✅ 自動翻譯
- ✅ 語音翻譯
- ✅ 統計功能
- **適合**: 小型團隊、商務用戶

### 專業版 (NT$ 599/月)
- ✅ 所有功能
- ✅ 優先支援
- ✅ 客製化設定
- **適合**: 企業用戶、大型團隊

## 📚 文件導覽

- [功能控制指南](FEATURE_CONTROL_GUIDE.md) - 完整功能說明
- [快速開始](QUICK_START.md) - 快速上手指南
- [更新總結](UPDATE_SUMMARY.md) - 更新內容詳情
- [功能對比](COMPARISON.md) - 新舊版本對比

## 🔐 安全性

- 🔑 每個群組擁有唯一 TOKEN
- 👮 分級權限管理
- 💾 資料本地儲存
- 🛡️ 自動清理機制（20天未使用自動退出）

## 🛠️ 技術架構

### 核心技術
- **框架**: Flask
- **LINE API**: linebot-sdk-python
- **資料庫**: SQLAlchemy (支援 PostgreSQL/SQLite)
- **翻譯引擎**: Google Translate + DeepL API

### 資料結構
```python
{
  "user_whitelist": [],
  "user_prefs": {},
  "voice_translation": {},
  "group_admin": {},
  "translate_engine_pref": {},
  "feature_switches": {
    "GROUP_ID": {
      "features": ["translate", "voice", ...],
      "token": "unique_token",
      "created_at": "2026-01-08T..."
    }
  }
}
```

## 📊 系統特色

### 效能優化
- ⚡ 非同步翻譯處理
- 🧵 多執行緒架構
- 💾 智慧記憶體管理
- 🔄 自動重啟機制

### 用戶體驗
- 🎨 新年主題設計
- 📱 響應式選單
- 💬 友善錯誤提示
- 🌈 多語言支援

## 🐛 除錯模式

查看系統狀態：
```
/狀態    - 運行時間、翻譯次數
/記憶體  - 記憶體使用狀況
/流量    - 今日字元數統計
```

## 📝 開發計畫

### 已完成 ✅
- [x] 新年風格選單
- [x] 功能開關系統
- [x] TOKEN 認證機制
- [x] 多引擎翻譯支援
- [x] 群組管理功能

### 規劃中 🚧
- [ ] Web 管理後台
- [ ] 付費系統整合
- [ ] API 端點擴展
- [ ] 使用量分析儀表板
- [ ] 自訂回應功能

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request！

## 📄 授權

本專案採用 MIT 授權條款

## 🎊 致謝

感謝所有使用者的支持與反饋！

---

**🧧 祝您新年快樂，生意興隆！🧧**

*Made with ❤️ in Taiwan*
